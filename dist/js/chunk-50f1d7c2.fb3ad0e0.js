(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50f1d7c2"],{"1ef7":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("van-nav-bar",{attrs:{fixed:"",title:"不凡","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}}),o("div",{staticClass:"content"},[o("form",{attrs:{action:"/"}},[o("van-search",{attrs:{"show-action":"",placeholder:"商品搜索"},on:{input:t.onSearch,cancel:t.onCancel},model:{value:t.value,callback:function(e){t.value="string"===typeof e?e.trim():e},expression:"value"}})],1),""==t.isShow?o("div",{staticClass:"default"},[0!==t.historyData.length?o("ul",{staticClass:"history"},[o("div",{staticClass:"hisTitle"},[t._v(" 历史记录 "),o("van-icon",{attrs:{name:"delete"},on:{click:t.clearhistoryAction}})],1),t._l(t.historyData,(function(e,i){return o("li",{key:i,on:{click:function(o){return t.search(e)}}},[o("span",[t._v(t._s(e.keyword))])])}))],2):t._e(),o("ul",{staticClass:"hotSearch"},[o("div",{staticClass:"hotTitle"},[t._v("热门搜索")]),t._l(t.hotKeywordList,(function(e,i){return o("li",{key:i,on:{click:function(o){return t.addhis(e)}}},[o("span",{class:1==e.is_hot?"hot":""},[t._v(t._s(e.keyword))])])}))],2)]):t._e(),"list"==t.isShow?o("div",{staticClass:"list"},[o("ul",t._l(t.keywords,(function(e){return o("li",{key:e.id,staticClass:"keywords",on:{click:function(o){return t.addhistory(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0)]):t._e(),"goods"==t.isShow?o("div",{staticClass:"goods"},[o("div",{staticClass:"sortnav"},[o("div",{class:"zh"==t.prices?"active":"",on:{click:t.getZh}},[t._v("综合")]),o("div",{staticClass:"price-t",on:{click:t.getPrice}},[o("div",{class:"jg"==t.prices?"active price-l":"price-l"},[t._v(" 价格 ")]),o("div",{staticClass:"icon-box"},[o("van-icon",{staticClass:"icon-top",attrs:{name:"arrow-up"}}),o("van-icon",{staticClass:"icon-bottom",attrs:{name:"arrow-down"}})],1)]),o("div",{class:"sort"==t.prices?"active":"",on:{click:t.getSort}},[t._v(" 分类 ")])]),o("ul",{staticClass:"sortlist"},t._l(t.data,(function(e){return o("li",{key:e.id,on:{click:function(o){return t.goGoods(e)}}},[o("img",{attrs:{src:e.list_pic_url,alt:""}}),o("p",[t._v(t._s(e.name))]),o("p",{staticClass:"price"},[t._v("¥"+t._s(e.retail_price))])])})),0)]):t._e()])],1)},n=[],s=(o("b0c0"),o("ade3")),r=o("0c6d");function a(t){return Object(r["a"])({method:"post",url:"/search/clearhistoryAction",data:t})}function c(t){return Object(r["a"])({method:"post",url:"/search/addhistoryaction",data:t})}function d(t){return Object(r["a"])({method:"get",url:"/search/helperaction",data:t})}function l(t){return Object(r["a"])({method:"get",url:"/search/indexaction",data:t})}var u={data:function(){var t;return t={value:"",isShow:"",historyData:[],hotKeywordList:[],defaultKeyWords:"",keywords:[],order:"asc",data:"",prices:""},Object(s["a"])(t,"order",""),Object(s["a"])(t,"num",0),t},created:function(){this.init()},methods:{init:function(){var t=this;l({openId:localStorage.getItem("openId")}).then((function(e){t.defaultKeyWords=e.hotKeywordList,t.historyData=e.historyData,t.hotKeywordList=e.hotKeywordList}))},onClickLeft:function(){this.$router.back(1)},onSearch:function(t){var e=this;this.value.length>0?(console.log("输入了"),this.isShow="list"):this.isShow="",d({keyword:this.value}).then((function(t){e.keywords=t.keywords}))},addhistory:function(t){var e=this;c({keyword:t.name,openId:localStorage.getItem("openId")}).then((function(t){e.init()})),d({keyword:t.name,order:this.order}).then((function(t){console.log(t),e.isShow="goods",e.data=t.keywords}))},addhis:function(t){var e=this;c({keyword:t.keyword,openId:localStorage.getItem("openId")}).then((function(t){e.init()})),d({keyword:t.keyword,order:this.order}).then((function(t){console.log(t),e.data=t.keywords,t.keywords.length>0&&(e.isShow="goods")}))},clearhistoryAction:function(){var t=this;a({openId:localStorage.getItem("openId")}).then((function(e){t.init()}))},search:function(t){var e=this;d({keyword:t.keyword,order:this.order}).then((function(t){console.log(t),e.data=t.keywords,t.keywords.length>0&&(e.isShow="goods")}))},onCancel:function(){this.$router.back(1)},getZh:function(){this.prices="zh",this.order="",this.init()},getPrice:function(){this.prices="jg",this.num++,this.num%2==0?this.order="desc":this.order="asc",this.init()},getSort:function(){this.order="",this.prices="sort",this.init()},goGoods:function(t){this.$router.push({path:"/goods",query:{id:t.id}})}}},h=u,f=(o("4ade"),o("2877")),v=Object(f["a"])(h,i,n,!1,null,"a11aaede",null);e["default"]=v.exports},"4ade":function(t,e,o){"use strict";o("8570")},8570:function(t,e,o){},ade3:function(t,e,o){"use strict";function i(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}o.d(e,"a",(function(){return i}))},b0c0:function(t,e,o){var i=o("83ab"),n=o("9bf2").f,s=Function.prototype,r=s.toString,a=/^\s*function ([^ (]*)/,c="name";i&&!(c in s)&&n(s,c,{configurable:!0,get:function(){try{return r.call(this).match(a)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-50f1d7c2.fb3ad0e0.js.map