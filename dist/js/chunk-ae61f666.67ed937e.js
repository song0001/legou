(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ae61f666"],{"1ef7":function(t,o,e){"use strict";e.r(o);var i=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("van-nav-bar",{attrs:{fixed:"",title:"乐购","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}}),e("div",{staticClass:"content"},[e("form",{attrs:{action:"/"}},[e("van-search",{attrs:{"show-action":"",placeholder:"商品搜索"},on:{input:t.onSearch,cancel:t.onCancel},model:{value:t.value,callback:function(o){t.value="string"===typeof o?o.trim():o},expression:"value"}})],1),""==t.isShow?e("div",{staticClass:"default"},[0!==t.historyData.length?e("ul",{staticClass:"history"},[e("div",{staticClass:"hisTitle"},[t._v(" 历史记录 "),e("van-icon",{attrs:{name:"delete"},on:{click:t.clearhistoryAction}})],1),t._l(t.historyData,(function(o,i){return e("li",{key:i,on:{click:function(e){return t.search(o)}}},[e("span",[t._v(t._s(o.keyword))])])}))],2):t._e(),e("ul",{staticClass:"hotSearch"},[e("div",{staticClass:"hotTitle"},[t._v("热门搜索")]),t._l(t.hotKeywordList,(function(o,i){return e("li",{key:i,on:{click:function(e){return t.addhis(o)}}},[e("span",{class:1==o.is_hot?"hot":""},[t._v(t._s(o.keyword))])])}))],2)]):t._e(),"list"==t.isShow?e("div",{staticClass:"list"},[e("ul",t._l(t.keywords,(function(o){return e("li",{key:o.id,staticClass:"keywords",on:{click:function(e){return t.addhistory(o)}}},[t._v(" "+t._s(o.name)+" ")])})),0)]):t._e(),"goods"==t.isShow?e("div",{staticClass:"goods"},[e("div",{staticClass:"sortnav"},[e("div",{class:"zh"==t.prices?"active":"",on:{click:t.getZh}},[t._v("综合")]),e("div",{staticClass:"price-t",on:{click:t.getPrice}},[e("div",{class:"jg"==t.prices?"active price-l":"price-l"},[t._v(" 价格 ")]),e("div",{staticClass:"icon-box"},[e("van-icon",{staticClass:"icon-top",attrs:{name:"arrow-up"}}),e("van-icon",{staticClass:"icon-bottom",attrs:{name:"arrow-down"}})],1)]),e("div",{class:"sort"==t.prices?"active":"",on:{click:t.getSort}},[t._v(" 分类 ")])]),e("ul",{staticClass:"sortlist"},t._l(t.data,(function(o){return e("li",{key:o.id,on:{click:function(e){return t.goGoods(o)}}},[e("img",{attrs:{src:o.list_pic_url,alt:""}}),e("p",[t._v(t._s(o.name))]),e("p",{staticClass:"price"},[t._v("¥"+t._s(o.retail_price))])])})),0)]):t._e()])],1)},n=[],s=(e("b0c0"),e("ade3")),r=e("0c6d");function a(t){return Object(r["a"])({method:"post",url:"/search/clearhistoryAction",data:t})}function c(t){return Object(r["a"])({method:"post",url:"/search/addhistoryaction",data:t})}function l(t){return Object(r["a"])({method:"get",url:"/search/helperaction",data:t})}function d(t){return Object(r["a"])({method:"get",url:"/search/indexaction",data:t})}var u={data:function(){var t;return t={value:"",isShow:"",historyData:[],hotKeywordList:[],defaultKeyWords:"",keywords:[],order:"asc",data:"",prices:""},Object(s["a"])(t,"order",""),Object(s["a"])(t,"num",0),t},created:function(){this.init()},methods:{init:function(){var t=this;d({openId:localStorage.getItem("openId")}).then((function(o){t.defaultKeyWords=o.hotKeywordList,t.historyData=o.historyData,t.hotKeywordList=o.hotKeywordList}))},onClickLeft:function(){this.$router.back(1)},onSearch:function(t){var o=this;this.value.length>0?(console.log("输入了"),this.isShow="list"):this.isShow="",l({keyword:this.value}).then((function(t){o.keywords=t.keywords}))},addhistory:function(t){var o=this;c({keyword:t.name,openId:localStorage.getItem("openId")}).then((function(t){o.init()})),l({keyword:t.name,order:this.order}).then((function(t){console.log(t),o.isShow="goods",o.data=t.keywords}))},addhis:function(t){var o=this;c({keyword:t.keyword,openId:localStorage.getItem("openId")}).then((function(t){o.init()})),l({keyword:t.keyword,order:this.order}).then((function(t){console.log(t),o.data=t.keywords,t.keywords.length>0&&(o.isShow="goods")}))},clearhistoryAction:function(){var t=this;a({openId:localStorage.getItem("openId")}).then((function(o){t.init()}))},search:function(t){var o=this;l({keyword:t.keyword,order:this.order}).then((function(t){console.log(t),o.data=t.keywords,t.keywords.length>0&&(o.isShow="goods")}))},onCancel:function(){this.$router.back(1)},getZh:function(){this.prices="zh",this.order="",this.init()},getPrice:function(){this.prices="jg",this.num++,this.num%2==0?this.order="desc":this.order="asc",this.init()},getSort:function(){this.order="",this.prices="sort",this.init()},goGoods:function(t){this.$router.push({path:"/goods",query:{id:t.id}})}}},h=u,f=(e("4696"),e("2877")),v=Object(f["a"])(h,i,n,!1,null,"84468c70",null);o["default"]=v.exports},4696:function(t,o,e){"use strict";e("a4dc")},a4dc:function(t,o,e){},ade3:function(t,o,e){"use strict";function i(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}e.d(o,"a",(function(){return i}))},b0c0:function(t,o,e){var i=e("83ab"),n=e("9bf2").f,s=Function.prototype,r=s.toString,a=/^\s*function ([^ (]*)/,c="name";i&&!(c in s)&&n(s,c,{configurable:!0,get:function(){try{return r.call(this).match(a)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-ae61f666.67ed937e.js.map